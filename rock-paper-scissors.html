<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rock, paper or scissors</title>
  </head>
  <body>
    <button id="rock">Rock</button>
    <button id="paper">Paper</button>
    <button id="scissors">Scissors</button>

    <div id="scoreboard">
      <h1>Scoreboard</h1>
      Scoreboard
      <div id="div-player">
        <h2>Player</h2>
        <p>Score: <span id="player-score">0</span></p>
      </div>
      <div id="div-computer">
        <h2>Computer</h2>
        <p>Score: <span id="computer-score">0</span></p>
      </div>
      <button id="restartBtn">Restart</button>
    </div>
    <h2 id="announceWinner"></h2>

    <script>
      const displayPlayerScore = document.querySelector("#player-score");
      const displayComputerScore = document.querySelector("#computer-score");
      const announceWinner = document.querySelector("#announceWinner");
      const selectRock = document.querySelector("#rock");
      const selectPaper = document.querySelector("#paper");
      const selectScissors = document.querySelector("#scissors");
      const restartBtn = document.querySelector("#restartBtn");

      const validChoice = ["rock", "paper", "scissors"];
      let playerScore = 0;
      let computerScore = 0;

      function getComputerChoice() {
        result = Math.floor(Math.random() * 3);
        computerChoice = validChoice[result];
        return computerChoice;
      }
      function getUserInput() {
        selectRock.addEventListener("click", () =>
          playRound("rock", getComputerChoice())
        );
        selectPaper.addEventListener("click", () =>
          playRound("paper", getComputerChoice())
        );
        selectScissors.addEventListener("click", () =>
          playRound("scissors", getComputerChoice())
        );
      }

      function playRound(userInput, computerChoice) {
        if (userInput === "rock" && computerChoice === "scissors") {
          if (playerWinRound() === 5 && isGameOver());
        } else if (userInput === "paper" && computerChoice === "rock") {
          playerWinRound();
        } else if (userInput === "scissors" && computerChoice === "paper") {
          playerWinRound();
        } else if (userInput === computerChoice) {
          //announceWinner.textContent = "It's a tie!"
          console.log("It's a tie!");
        } else {
          computerWinRound();
        }
      }
      function playerWinRound() {
        playerScore++;
        displayPlayerScore.textContent = playerScore;
        console.log("You win!");
        isGameOver();
      }
      function computerWinRound() {
        computerScore++;
        displayComputerScore.textContent = computerScore;
        console.log("You lost!");
        isGameOver();
      }

      function isGameOver() {
        if (playerScore === 5) {
          announceWinner.textContent = "The winner is Player!";
          // TODO: Select button and remove/disable the button click.
          selectRock.disabled = true;
          selectPaper.disabled = true;
          selectScissors.disabled = true;
          return false;
        } else if (computerScore === 5) {
          announceWinner.textContent = "The winner is Computer!";
          selectRock.disabled = true;
          selectPaper.disabled = true;
          selectScissors.disabled = true;
          return false;
        }
        return true;
      }

      function restartGame() {
        if (isGameOver() == true) {
          restartBtn.addEventListener("click", () => location.reload());
        }
      }

      playRound();

      console.log(`The computer picked ${getComputerChoice()}`);
      console.log(`You picked ${getUserInput()}`);
      console.log(playRound());
    </script>
  </body>
</html>
